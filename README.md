# Решение кейса "KOBLiK"

Решение представляет собой три микросервиса: 

- `ffmpeg_server.py` -- служебный контейнер для разбивки потоков на зоны и отрезки по 5 секунд. Результаты деятельности он складывает в папку
- `video_predictor.py` -- контейнер, в котором крутится нейронка. Предсказывает класс работы, проводящейся в зоне
- `bot.py` -- собственно бот, интерфейс для взаимодействия

Для запуска всего вместе используется скрипт `run.sh`

## Конфигурация

Для того, чтобы добавить/удалить зоны можно поменять файл `zones.json`. По сути -- это главный конфиг решения. Формат у него следующий:

```
{
    "Название зоны": {
        "rtspstream": "ссылка на поток по протоколу rtsp",
        "side": "сторона с которой расположена зона на камере: левая или правая"
    },
}
```

## Работа под нагрузкой

Во время работы решение потребляет 2 ядра CPU на одну камеру (по одному на зону) для инференса, и ещё 1 ядро для разбивки потока. Необходимо это учитывать при выборе мощностей для запуска